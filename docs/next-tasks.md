# Palette 프로젝트 - 향후 작업 계획

## 1. 개요
이 문서는 Palette 웹 애플리케이션의 현재 개발 단계와 향후 구현할 기능 및 개선 사항을 정의합니다. 모든 작업은 `documentation.mdc`에 명시된 문서화 표준을 따르며, 각 주요 기능 개발 시작 전에는 해당 `task.mdc` (또는 작업 명세서) 작성을 원칙으로 합니다.

## 2. 최근 완료된 주요 작업
- **Google 소셜 로그인 시스템 1차 구현 완료:**
    - 신규 가입자 대상 추가 정보 입력 온보딩 플로우 (`/social-onboarding`) 적용 완료.
    - 기존 이메일 가입 계정과 동일한 이메일의 Google 계정으로 로그인 시도 시, 자동 계정 연동 대신 사용자 안내 및 수동 연동 필요 메시지 (`EMAIL_ACCOUNT_EXISTS_NEEDS_MANUAL_LINK`) 처리 로직 적용 완료.
- **Kakao 소셜 로그인 시스템 개선 완료:**
    - `intent` 파라미터 기반 로그인/회원가입 분기 처리 (백엔드).
    - 신규 가입자 대상 `/social-onboarding` 리디렉션 (프론트엔드).
    - **카카오 계정 이메일 미제공 시 가입 플로우 구현 완료:**
        - `ACCOUNT_NOT_FOUND_NO_EMAIL` 에러 코드 및 `tempKakaoProfile` 정보 반환 (백엔드).
        - `/social-email-request` 페이지를 통한 사용자 이메일 입력 및 최종 가입 처리 (`/api/auth/kakao/complete-signup` API 연동).
    - 주요 에러 케이스 (이메일 중복, 계정 연동 필요 등) 처리 로직 및 메시지.
    - **카카오 자동 로그인 방지 1차 조치**: 웹사이트 로그아웃 시 카카오 SDK 로그아웃 동시 실행.
- **백엔드 소셜 로그인 로직 리팩토링 완료:**
    - `authHelper.js` 도입하여 `googleLogin`, `kakaoLogin` 컨트롤러의 공통 로직 통합 및 코드 간소화.
- **회원 탈퇴 기능 1차 구현 완료:**
    - 이메일 가입 사용자: 비밀번호 재확인 후 탈퇴 처리.
    - 소셜 가입 사용자: 비밀번호 확인 없이 탈퇴 처리.
    - 카카오 사용자: 서버에서 카카오 계정 연동 해제 시도 (어드민 키 사용).
    - 사용자 DB 정보 삭제.
    - 프론트엔드 설정 페이지에 탈퇴 UI(모달 포함) 및 `AuthContext` 연동 완료.
- **관련 문서 업데이트 완료:**
    - `docs/tasks/social-login-google.md`
    - `docs/tasks/social-login-kakao.md` (v1.1 업데이트)
    - `docs/PROJECT_STRUCTURE.md` (필요시 업데이트 가정)
    - `docs/tasks/auth-system.md` (회원 탈퇴, 카카오 이메일 미제공 처리, 신규 API 반영)
    - `docs/tech-stack.md` (변경 사항 없음)

## 3. 다음 작업 우선순위

### 3.1. 최우선 작업 (High Priority)

#### 3.1.1. 인증 시스템 안정화 및 마무리
- **이메일 인증 401 에러 해결:**
    - 내용: 회원가입 후 또는 특정 상황에서 이메일 인증 상태 체크 시 발생하는 401 에러의 근본 원인 분석 및 해결.
    - 관련 파일 (예상): `client/src/contexts/AuthContext.tsx`, `server/src/controllers/auth.js` (토큰 및 인증 상태 로직 점검)
    - 목표: 안정적인 이메일 인증 플로우 확립.

#### 3.1.2. 핵심 계정 기능 확장
- **계정 설정 내 수동 계정 연동 기능 기반 마련:**
    - 내용: 사용자가 로그인 후 "계정 설정" 페이지에서 자신의 Palette 계정을 다른 소셜 서비스(Google, Kakao 등)와 수동으로 연결/해제할 수 있는 기능의 백엔드 API 설계 및 기초 구현.
    - 요구사항:
        - 엔드포인트 정의 (예: `POST /api/users/me/link-social`, `POST /api/users/me/unlink-social`).
        - 현재 로그인된 사용자 세션 기반으로 소셜 계정 정보 업데이트 로직.
        - 연결하려는 소셜 계정이 이미 다른 Palette 계정에 연결되어 있는지 확인 로직.
    - 목표: `EMAIL_ACCOUNT_EXISTS_NEEDS_MANUAL_LINK` 에러 발생 시 사용자가 후속 조치를 취할 수 있도록 기반 마련. (UI는 다음 단계에서 구현)

### 3.2. 차순위 작업 (Medium Priority)

#### 3.2.1. 소셜 로그인 시스템 최종 점검
- **Kakao 소셜 로그인 QA 및 UI/UX 개선:**
    - 내용: 이메일 없는 사용자 가입 플로우를 포함한 전반적인 카카오 로그인 QA. 오류 메시지 UI/UX 개선.
    - (선택) 카카오 로그인 시 `prompts: 'login'` 옵션 적용 여부 검토 (매번 계정 선택창 표시).
- **Google 소셜 로그인 자동 로그인 현상 개선 검토:**
    - 내용: 현재 구글 로그인 버튼 클릭 시 발생하는 자동 로그인(또는 계정 자동 선택) 현상 분석 및 사용자 경험 개선 방안 모색.
    - 방법: (필요시) `useGoogleLogin` 훅과 `prompt: 'select_account'` 옵션 사용 등 검토.

#### 3.2.2. 사용자 프로필 기능 확장
- **프로필 페이지 기능 확장:**
    - 내용: `MyPage.tsx` 및 `SettingsPage.tsx` 기능 보강. (예: 프로필 이미지 업로드/변경, 추가 개인 정보 필드 등)
- **관심사 기반 초기 프로필 설정 (색각이상 유형 포함):**
    - 내용: 회원가입 또는 소셜 온보딩 마지막 단계에서 사용자의 관심사 (패션 스타일 등) 및 색각이상 유형을 선택받아 저장하는 기능. 이는 `docs/tasks/auth-system.md`에도 명시된 요구사항.
    - 목표: 개인화된 콘텐츠 제공 및 UI 최적화 기반 마련.
- **색각이상자 맞춤 기능 (1단계 - UI 테마 적용):**
    - 내용: 저장된 사용자의 색각이상 유형에 따라 `useAppTheme`를 통해 기본적인 UI 테마(색상 팔레트 등)가 적용되는 것을 확인 및 필요한 부분 개선.

#### 3.2.3. UI/UX 개선
- **계정 연동 안내 메시지 개선:**
    - 내용: `EMAIL_ACCOUNT_EXISTS_NEEDS_MANUAL_LINK` 에러 발생 시, 사용자에게 "계정 설정에서 계정을 연결하라"는 명확한 안내와 함께 (가능하다면) 설정 페이지로 바로 이동할 수 있는 링크/버튼 제공.
- **전반적인 로딩 상태 및 오류 피드백 강화:**
    - 내용: API 호출 등 비동기 작업 시 로딩 인디케이터를 명확히 표시하고, 오류 발생 시 사용자 친화적인 메시지 제공.
- **이메일 인증 관련 UI/UX 개선:**
    - 내용: 이메일 미인증 사용자에 대한 안내 강화 (예: 특정 기능 사용 제한 시 안내 팝업, 인증 메일 재발송 UI 개선 등).

### 3.3. 후순위 작업 (Low Priority / Future Considerations)
- 나머지 소셜 로그인 통합 (Facebook, Apple 등)
- 커뮤니티 기능 구현 (게시물, 댓글, 좋아요 등)
- 이미지 업로드 및 관리 기능
- 알림 시스템
- 전체적인 코드 리팩토링 및 성능 최적화 (이미지 최적화, 코드 스플리팅 등)
- 테스트 코드 커버리지 확대 (단위, 통합, E2E)
- CI/CD 파이프라인 구축

## 4. 문서화 동기화
- 모든 신규 기능 개발 및 주요 변경 사항은 관련 `task.mdc` 문서에 상세히 기록합니다.
- `docs/PROJECT_STRUCTURE.md`, `docs/tech-stack.md` 등의 핵심 프로젝트 문서는 항상 최신 상태를 유지합니다.
- API 변경 사항 발생 시 API 문서 (예: Swagger, Postman 등 사용 시 해당 문서)를 업데이트합니다.

## 5. 결론
위 작업 계획은 프로젝트의 안정성을 확보하고 핵심 기능을 점진적으로 확장하는 데 중점을 둡니다. 각 작업 단계 완료 시 사용자(개발자) 검토 및 승인을 거쳐 진행할 예정입니다. 